<Window x:Class="QuickCutter_Avalonia.Views.MainWindow"
        xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:behaviors="using:QuickCutter_Avalonia.Behaviors"
        xmlns:controls="using:QuickCutter_Avalonia.Styles"
        xmlns:converters="using:QuickCutter_Avalonia.Converters"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:ms="using:QuickCutter_Avalonia.Mode"
        xmlns:u="https://irihi.tech/ursa"
        xmlns:vlc="clr-namespace:LibVLCSharp.Avalonia;assembly=LibVLCSharp.Avalonia"
        xmlns:vm="using:QuickCutter_Avalonia.ViewModels"
        Title="{DynamicResource Localization.MainWindowTitle}"
        Width="1600"
        Height="900"
        MinWidth="1280"
        MinHeight="720"
        d:DesignHeight="900"
        d:DesignWidth="1600"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        mc:Ignorable="d">
    <Grid Name="MainGrid">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="160" MinWidth="160" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" MinWidth="569" />
        </Grid.ColumnDefinitions>
        <Border Grid.Column="0"
                Padding="2"
                Classes="Shadow"
                Theme="{DynamicResource CardBorder}">
            <Grid RowDefinitions="Auto,Auto,*,Auto,Auto">
                <Button x:Name="AddItemButton"
                        Grid.Row="0"
                        Height="40"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        Classes="Success"
                        Command="{Binding ImportProjectFileCommand}"
                        Theme="{DynamicResource SolidButton}">
                    <StackPanel Height="24" Orientation="Horizontal">
                        <PathIcon Width="15"
                                  Height="15"
                                  Data="M435-434H179v-91h256v-258h91v258h256v91H526v255h-91v-255Z" />
                        <TextBlock Margin="8,0"
                                   VerticalAlignment="Center"
                                   Classes="Subtitle2"
                                   Text="{DynamicResource Localization.ButtonText.AddVideo}" />
                    </StackPanel>
                </Button>
                <Separator Grid.Row="1" />
                <Grid.Resources>
                    <ContextMenu x:Key="ProjectsListContextMenu">
                        <MenuItem Click="ProjectList_SelectAll" Header="Select All" />
                        <MenuItem Click="ProjectList_Delete" Header="Delete" />
                    </ContextMenu>
                </Grid.Resources>
                <ListBox x:Name="ProjectsList"
                         Grid.Row="2"
                         ContextMenu="{StaticResource ProjectsListContextMenu}"
                         ItemsSource="{Binding Projects}"
                         SelectedItems="{Binding SelectedProjects}"
                         SelectionMode="Multiple">
                    <ListBox.Styles>
                        <Style Selector="ListBoxItem">
                            <Setter Property="Height" Value="48" />
                            <Setter Property="Padding" Value="16,0" />
                            <Setter Property="VerticalContentAlignment" Value="Center" />
                        </Style>
                    </ListBox.Styles>
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <u:LoadingContainer IsLoading="{Binding Loading, Mode=OneWay}" LoadingMessage="Loading...">
                                <TextBlock Text="{Binding MediaFullName}" />
                            </u:LoadingContainer>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
                <Separator Grid.Row="3" />
                <StackPanel Grid.Row="4"
                            Height="40"
                            Orientation="Horizontal"
                            Spacing="10">
                    <Button Name="SettingButton"
                            Classes="Tertiary"
                            Theme="{DynamicResource BorderlessButton}">
                        <PathIcon Width="20"
                                  Height="20"
                                  Data="m387.694-100.001-15.231-121.846q-16.077-5.385-32.962-15.077-16.885-9.693-30.193-20.77l-112.846 47.692L104.156-370l97.615-73.769q-1.385-8.923-1.962-17.923-.577-9-.577-17.923 0-8.539.577-17.347.577-8.808 1.962-19.269L104.156-590l92.306-159.229 112.461 47.308q14.462-11.462 30.885-20.962 16.424-9.501 32.27-15.27l15.616-121.846h184.612l15.231 122.231q18 6.538 32.578 15.269 14.577 8.731 29.423 20.578l114-47.308L855.844-590l-99.153 74.922q2.154 9.693 2.346 18.116.192 8.423.192 16.962 0 8.154-.384 16.577-.385 8.423-2.77 19.27L854.46-370l-92.307 159.998-112.615-48.077q-14.846 11.847-30.308 20.962-15.462 9.116-31.693 14.885l-15.231 122.231H387.694ZM440-160h78.615L533-267.154q30.615-8 55.961-22.731 25.346-14.73 48.885-37.884L737.231-286l39.384-68-86.769-65.385q5-15.538 6.808-30.461 1.807-14.923 1.807-30.154 0-15.615-1.807-30.154-1.808-14.538-6.808-29.692L777.385-606 738-674l-100.539 42.385q-20.076-21.462-48.115-37.923-28.039-16.462-56.731-23.308L520-800h-79.385l-13.23 106.769q-30.616 7.231-56.539 22.154-25.923 14.923-49.461 38.462L222-674l-39.385 68L269-541.615q-5 14.23-7 29.615-2 15.385-2 32.385Q260-464 262-449q2 15 6.615 29.615l-86 65.385L222-286l99-42q22.769 23.385 48.692 38.308 25.923 14.923 57.308 22.923L440-160Zm40.461-200.001q49.923 0 84.961-35.038Q600.46-430.078 600.46-480t-35.038-84.961q-35.038-35.038-84.961-35.038-50.537 0-85.268 35.038-34.73 35.039-34.73 84.961t34.73 84.961q34.731 35.038 85.268 35.038ZM480-480Z" />
                    </Button>
                    <ToggleSwitch Grid.Column="1"
                                  Padding="4"
                                  IsCheckedChanged="ToggleButton_OnIsCheckedChanged"
                                  Theme="{DynamicResource ButtonToggleSwitch}">
                        <ToggleSwitch.OnContent>
                            <PathIcon Width="20"
                                      Height="20"
                                      Data="M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM17 15C17.476 15 17.9408 14.9525 18.3901 14.862C17.296 17.3011 14.8464 19 12 19C8.13401 19 5 15.866 5 12C5 8.60996 7.40983 5.78277 10.6099 5.13803C10.218 6.01173 10 6.98041 10 8C10 11.866 13.134 15 17 15Z"
                                      Foreground="{DynamicResource ButtonDefaultTertiaryForeground}" />
                        </ToggleSwitch.OnContent>
                        <ToggleSwitch.OffContent>
                            <PathIcon Width="20"
                                      Height="20"
                                      Data="M3.55 19.09L4.96 20.5L6.76 18.71L5.34 17.29M12 6C8.69 6 6 8.69 6 12S8.69 18 12 18 18 15.31 18 12C18 8.68 15.31 6 12 6M20 13H23V11H20M17.24 18.71L19.04 20.5L20.45 19.09L18.66 17.29M20.45 5L19.04 3.6L17.24 5.39L18.66 6.81M13 1H11V4H13M6.76 5.39L4.96 3.6L3.55 5L5.34 6.81L6.76 5.39M1 13H4V11H1M13 20H11V23H13"
                                      Foreground="{DynamicResource ButtonDefaultTertiaryForeground}" />
                        </ToggleSwitch.OffContent>
                    </ToggleSwitch>
                </StackPanel>

            </Grid>
        </Border>
        <controls:GridSplitterWithoutKeyDown Grid.Column="1" />
        <Grid Grid.Column="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="45" MinHeight="45" />
                <RowDefinition Height="*" MinHeight="200" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" MinHeight="45" />
            </Grid.RowDefinitions>
            <Border Grid.Row="0"
                    Height="45"
                    Padding="20,0"
                    Classes="Shadow"
                    Theme="{DynamicResource CardBorder}">
                <Grid VerticalAlignment="Center" ColumnDefinitions="Auto,10,*,10,Auto">
                    <PathIcon Grid.Column="0"
                              Width="20"
                              Height="20"
                              Data="M330.001-250.001h299.998v-59.998H330.001v59.998Zm0-160h299.998v-59.998H330.001v59.998Zm-77.692 310q-30.308 0-51.308-21t-21-51.308v-615.382q0-30.308 21-51.308t51.308-21h317.692l209.998 209.998v477.692q0 30.308-21 51.308t-51.308 21H252.309Zm287.692-520V-800H252.309q-4.616 0-8.463 3.846-3.846 3.847-3.846 8.463v615.382q0 4.616 3.846 8.463 3.847 3.846 8.463 3.846h455.382q4.616 0 8.463-3.846 3.846-3.847 3.846-8.463v-447.692H540.001ZM240-800v179.999V-800v640V-800Z" />
                    <TextBlock x:Name="HeaderTitle"
                               Grid.Column="2"
                               VerticalAlignment="Center" />
                    <Button Name="DeleteProjectButton"
                            Grid.Column="4"
                            Width="30"
                            Height="30"
                            Classes="Danger"
                            IsEnabled="False"
                            IsVisible="False"
                            Theme="{DynamicResource BorderlessButton}">
                        <PathIcon Width="20"
                                  Height="20"
                                  Data="M292.309-140.001q-29.923 0-51.115-21.193-21.193-21.192-21.193-51.115V-720h-40v-59.999H360v-35.384h240v35.384h179.999V-720h-40v507.691q0 30.308-21 51.308t-51.308 21H292.309ZM680-720H280v507.691q0 5.385 3.462 8.847 3.462 3.462 8.847 3.462h375.382q4.616 0 8.463-3.846 3.846-3.847 3.846-8.463V-720ZM376.155-280h59.999v-360h-59.999v360Zm147.691 0h59.999v-360h-59.999v360ZM280-720v520-520Z" />
                    </Button>
                </Grid>
            </Border>
            <Border Grid.Row="1"
                    Padding="5"
                    Classes="Shadow"
                    Theme="{DynamicResource CardBorder}">
                <Grid Name="MediaPlayerGrid" RowDefinitions="*,Auto,Auto">
                    <vlc:VideoView x:Name="VideoView"
                                   Grid.Row="0"
                                   HorizontalAlignment="Stretch"
                                   VerticalAlignment="Stretch"
                                   MediaPlayer="{Binding MediaPlayer}" />
                    <Separator Grid.Row="1" />
                    <Grid Grid.Row="2" RowDefinitions="36,34">
                        <Grid Grid.Row="0"
                              VerticalAlignment="Center"
                              ColumnDefinitions="*,10,Auto">
                            <Slider x:Name="TimeSlider"
                                    Grid.Column="0"
                                    Classes="Accent"
                                    IsSnapToTickEnabled="False"
                                    Maximum="1"
                                    Minimum="0"
                                    TickFrequency="0.01"
                                    Value="{Binding Position}" />
                            <StackPanel Grid.Column="2"
                                        Orientation="Horizontal"
                                        Spacing="10">
                                <PathIcon Width="15"
                                          Height="15"
                                          Data="M561.539-155.617v-61.999q86.538-27.538 139.422-100Q753.846-390.077 753.846-481q0-90.923-52.885-163.384-52.884-72.462-139.422-100v-61.999Q673.23-776.46 743.537-686.46q70.307 89.999 70.307 205.46 0 115.461-70.307 205.46-70.307 90-181.998 119.923ZM146.156-380.001v-199.998h148.46l171.537-171.536v543.07L294.616-380.001h-148.46Zm415.383 46.154v-294.306q40.461 22 62.537 61.961Q646.153-526.23 646.153-480q0 45.615-22.269 84.884t-62.345 61.269ZM406.154-606l-86 86h-114v80h114l86 86v-252Zm-100 126Z" />
                                <Slider Name="VolumSlider"
                                        Width="100"
                                        Classes="Modern"
                                        IsSnapToTickEnabled="True"
                                        Maximum="100"
                                        Minimum="0"
                                        TickFrequency="1"
                                        Value="{Binding Volume}" />
                            </StackPanel>

                        </Grid>
                        <StackPanel Grid.Row="1"
                                    Orientation="Horizontal"
                                    Spacing="10">
                            <Button x:Name="PlayorPauseButton"
                                    Width="30"
                                    Height="30"
                                    Classes="Tertiary"
                                    Command="{Binding PlayOrPauseVideoCommand}"
                                    HotKey="Space"
                                    Theme="{DynamicResource BorderlessButton}">
                                <Button.Styles>
                                    <Style Selector="PathIcon.playing">
                                        <Setter Property="IsVisible" Value="True" />
                                    </Style>
                                    <Style Selector="PathIcon:not(.playing)">
                                        <Setter Property="IsVisible" Value="False" />
                                    </Style>
                                </Button.Styles>
                                <Grid>
                                    <PathIcon Name="PlayIcon"
                                              Width="15"
                                              Height="15"
                                              Classes.playing="{Binding !IsPlaying}"
                                              Data="M340.001-236.156v-487.688L723.074-480 340.001-236.156ZM400-480Zm0 134 210.769-134L400-614v268Z"
                                              Foreground="#FF5AC262" />

                                    <PathIcon Name="PauseIcon"
                                              Width="15"
                                              Height="15"
                                              Classes.playing="{Binding IsPlaying}"
                                              Data="M530.001-220.001v-519.998h209.998v519.998H530.001Zm-310 0v-519.998h209.998v519.998H220.001ZM589.999-280H680v-400h-90.001v400ZM280-280h90.001v-400H280v400Zm0-400v400-400Zm309.999 0v400-400Z"
                                              Foreground="#FFFB9078" />
                                </Grid>
                            </Button>
                            <Button x:Name="BackwardButton"
                                    Width="30"
                                    Height="30"
                                    Classes="Tertiary"
                                    Command="{Binding BackwardCommand}"
                                    HotKey="Left"
                                    Theme="{DynamicResource BorderlessButton}"
                                    ToolTip.Tip="{DynamicResource Localization.ToolTip.BackwardBtn}">
                                <PathIcon Width="15"
                                          Height="15"
                                          Data="M250.001-250.001v-459.998h59.998v459.998h-59.998ZM680-253.847 453.847-480 680-706.153 722.153-664l-184 184 184 184L680-253.847Z" />
                            </Button>
                            <Button x:Name="ForwardButton"
                                    Width="30"
                                    Height="30"
                                    Classes="Tertiary"
                                    Command="{Binding ForwardCommand}"
                                    HotKey="Right"
                                    Theme="{DynamicResource BorderlessButton}"
                                    ToolTip.Tip="{DynamicResource Localization.ToolTip.ForwardBtn}">
                                <PathIcon Width="15"
                                          Height="15"
                                          Data="M280-253.847 237.847-296l184-184-184-184L280-706.153 506.153-480 280-253.847Zm370.001 3.846v-459.998h59.998v459.998h-59.998Z" />
                            </Button>
                            <Button x:Name="InButton"
                                    Width="30"
                                    Height="30"
                                    Classes="Tertiary"
                                    Click="InButton_Click"
                                    HotKey="I"
                                    Theme="{DynamicResource BorderlessButton}"
                                    ToolTip.Tip="{DynamicResource Localization.ToolTip.InBtn}">
                                <PathIcon Width="15"
                                          Height="15"
                                          Data="M440-120v-80h80v80h-80Zm0-640v-80h80v80h-80Zm160 640v-80h80v80h-80Zm0-640v-80h80v80h-80Zm160 640v-80h80v80h-80Zm0-640v-80h80v80h-80ZM120-120v-80h80v-560h-80v-80h240v80h-80v560h80v80H120Zm560-200-56-56 63-64H400v-80h287l-63-64 56-56 160 160-160 160Z" />
                            </Button>
                            <Button x:Name="OutButton"
                                    Width="30"
                                    Height="30"
                                    Classes="Tertiary"
                                    Click="OutButton_Click"
                                    HotKey="O"
                                    Theme="{DynamicResource BorderlessButton}"
                                    ToolTip.Tip="{DynamicResource Localization.ToolTip.OutBtn}">
                                <PathIcon Width="15"
                                          Height="15"
                                          Data="M440-760v-80h80v80h-80Zm0 640v-80h80v80h-80ZM280-760v-80h80v80h-80Zm0 640v-80h80v80h-80ZM120-760v-80h80v80h-80Zm0 640v-80h80v80h-80Zm480 0v-80h80v-560h-80v-80h240v80h-80v560h80v80H600ZM280-320 120-480l160-160 56 56-63 64h287v80H273l63 64-56 56Z" />
                            </Button>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Width="80"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           Text="{Binding CurrentTime, StringFormat=hh\\:mm\\:ss\\.ff}" />
                                <TextBlock HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           Text=" / " />
                                <TextBlock Width="80"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           Text="{Binding Duration, StringFormat=hh\\:mm\\:ss\\.ff}" />
                            </StackPanel>
                            <TextBlock VerticalAlignment="Center" Text="{DynamicResource Localization.AudioTrackText}" />
                            <ComboBox Name="AudioTrackComboBox"
                                      Width="200"
                                      DisplayMemberBinding="{Binding Name}"
                                      ItemsSource="{Binding AudioTrack}"
                                      SelectedItem="{Binding SelectedAudioTrack}" />
                            <TextBlock VerticalAlignment="Center" Text="{DynamicResource Localization.SubtitleTrackText}" />
                            <ComboBox Name="SubtitleTrackComboBox"
                                      Width="200"
                                      DisplayMemberBinding="{Binding Name}"
                                      ItemsSource="{Binding SubtitleTrack}"
                                      SelectedItem="{Binding SelectedSubtitleTrack}" />
                            <Button Name="TestButton"
                                    Click="Button_Click"
                                    Content="Test"
                                    IsEnabled="False"
                                    IsVisible="False" />
                        </StackPanel>
                    </Grid>
                </Grid>
            </Border>
            <controls:GridSplitterWithoutKeyDown Grid.Row="2" />
            <Border Grid.Row="3"
                    Padding="2"
                    Classes="Shadow"
                    Theme="{DynamicResource CardBorder}">
                <Border.Resources>
                    <ContextMenu x:Key="DataGridContextMenu">
                        <MenuItem Click="DataGridMenu_SelectAll"
                                  Header="Select All"
                                  HotKey="Ctrl+A" />
                        <MenuItem Click="DataGridMenu_Delete" Header="Delete" />
                    </ContextMenu>
                </Border.Resources>
                <DataGrid Name="OutputFilesDataGrid"
                          Grid.Row="0"
                          CanUserResizeColumns="True"
                          CanUserSortColumns="False"
                          ContextMenu="{StaticResource DataGridContextMenu}"
                          GridLinesVisibility="All"
                          HeadersVisibility="Column"
                          RowHeaderWidth="30"
                          SelectedItem="{Binding SelectedSingleOutputFile, Mode=OneWay}"
                          SelectionMode="Extended">
                    <DataGrid.Resources>
                        <converters:StringToTimeSpanConverter x:Key="StringToTimeSpanConverter" />
                    </DataGrid.Resources>
                    <DataGrid.Columns>
                        <DataGridTextColumn Width="35"
                                            x:DataType="ms:OutputFile"
                                            Binding="{Binding RowIndex}"
                                            Header=""
                                            IsReadOnly="True" />
                        <!--  =================================================  -->
                        <DataGridTextColumn Width="300"
                                            MinWidth="100"
                                            x:DataType="ms:OutputFile"
                                            Binding="{Binding OutputFileName}"
                                            IsReadOnly="True">
                            <DataGridTextColumn.Header>
                                <TextBlock HorizontalAlignment="Center" Text="{DynamicResource Localization.DataGrid.FileName}" />
                            </DataGridTextColumn.Header>
                        </DataGridTextColumn>
                        <!--  =================================================  -->
                        <DataGridTemplateColumn Width="Auto" CanUserResize="False">
                            <DataGridTemplateColumn.Header>
                                <TextBlock HorizontalAlignment="Center" Text="{DynamicResource Localization.DataGrid.InTime}" />
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate x:DataType="ms:OutputFile">
                                    <MaskedTextBox Margin="2" Mask="00:00:00.00">
                                        <Interaction.Behaviors>
                                            <behaviors:LostFocusUpdateBindingBehavior Text="{Binding Edit_InTime, Converter={StaticResource StringToTimeSpanConverter}}" />
                                        </Interaction.Behaviors>
                                    </MaskedTextBox>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <!--  =================================================  -->
                        <DataGridTemplateColumn Width="Auto" CanUserResize="False">
                            <DataGridTemplateColumn.Header>
                                <TextBlock HorizontalAlignment="Center" Text="{DynamicResource Localization.DataGrid.OutTime}" />
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate x:DataType="ms:OutputFile">
                                    <MaskedTextBox Margin="2" Mask="00:00:00.00">
                                        <Interaction.Behaviors>
                                            <behaviors:LostFocusUpdateBindingBehavior Text="{Binding Edit_OutTime, Converter={StaticResource StringToTimeSpanConverter}}" />
                                        </Interaction.Behaviors>
                                    </MaskedTextBox>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <!--  =================================================  -->
                        <DataGridTemplateColumn Width="Auto" CanUserResize="False">
                            <DataGridTemplateColumn.Header>
                                <Grid HorizontalAlignment="Center" ColumnDefinitions="*,Auto,*">
                                    <Border Grid.Column="0"
                                            Background="#995DC264"
                                            CornerRadius="5">
                                        <TextBlock Text="{DynamicResource Localization.DataGrid.CodecMode_Copy}" />
                                    </Border>
                                    <TextBlock Grid.Column="1"
                                               Margin="2,0,2,0"
                                               Text="|" />
                                    <Border Grid.Column="2"
                                            Background="#99FC725A"
                                            CornerRadius="5">
                                        <TextBlock Text="{DynamicResource Localization.DataGrid.CodecMode_Transcoding}" />
                                    </Border>
                                </Grid>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate x:DataType="ms:OutputFile">
                                    <CheckBox Margin="2"
                                              HorizontalAlignment="Center"
                                              IsChecked="{Binding IsTransCode}">
                                        <Grid>
                                            <Grid.Styles>
                                                <Style Selector="Border.Show">
                                                    <Setter Property="IsVisible" Value="True" />
                                                </Style>
                                                <Style Selector="Border:not(.Show)">
                                                    <Setter Property="IsVisible" Value="False" />
                                                </Style>
                                            </Grid.Styles>
                                            <Border Width="100"
                                                    Height="20"
                                                    Padding="3,0"
                                                    Background="#995DC264"
                                                    Classes.Show="{Binding !IsTransCode}"
                                                    CornerRadius="5">
                                                <TextBlock HorizontalAlignment="Center" Text="{DynamicResource Localization.DataGrid.CodecMode_Copy}" />
                                            </Border>
                                            <Border Width="100"
                                                    Height="20"
                                                    Padding="3,0"
                                                    Background="#99FC725A"
                                                    Classes.Show="{Binding IsTransCode}"
                                                    CornerRadius="5">
                                                <TextBlock HorizontalAlignment="Center" Text="{DynamicResource Localization.DataGrid.CodecMode_Transcoding}" />
                                            </Border>
                                        </Grid>
                                    </CheckBox>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <!--  =================================================  -->
                        <DataGridTemplateColumn Width="Auto" CanUserResize="False">
                            <DataGridTemplateColumn.Header>
                                <TextBlock HorizontalAlignment="Center" Text="{DynamicResource Localization.DataGrid.Codec}" />
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate x:DataType="ms:OutputFile">
                                    <ComboBox Margin="2"
                                              DisplayMemberBinding="{Binding Name}"
                                              IsEnabled="{Binding IsTransCode}"
                                              ItemsSource="{Binding CodecOptions}"
                                              SelectedItem="{Binding SelectedCodec}" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <!--  =================================================  -->
                        <DataGridTemplateColumn Width="Auto" CanUserResize="False">
                            <DataGridTemplateColumn.Header>
                                <TextBlock HorizontalAlignment="Center" Text="{DynamicResource Localization.DataGrid.Preset}" />
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate x:DataType="ms:OutputFile">
                                    <ComboBox Margin="2"
                                              IsEnabled="{Binding IsTransCode}"
                                              ItemsSource="{Binding SpeedPresetOptions}"
                                              SelectedItem="{Binding SelectedSpeedPreset}" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <!--  =================================================  -->
                        <DataGridTemplateColumn Width="Auto" CanUserResize="False">
                            <DataGridTemplateColumn.Header>
                                <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                                    <TextBlock Text="{DynamicResource Localization.DataGrid.CRF}" />
                                    <PathIcon Width="15"
                                              Height="15"
                                              Margin="5,0,0,0"
                                              Data="M478-240q21 0 35.5-14.5T528-290q0-21-14.5-35.5T478-340q-21 0-35.5 14.5T428-290q0 21 14.5 35.5T478-240Zm-36-154h74q0-33 7.5-52t42.5-52q26-26 41-49.5t15-56.5q0-56-41-86t-97-30q-57 0-92.5 30T342-618l66 26q5-18 22.5-39t53.5-21q32 0 48 17.5t16 38.5q0 20-12 37.5T506-526q-44 39-54 59t-10 73Zm38 314q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"
                                              ToolTip.Tip="{DynamicResource Localization.ToolTip.CRF}" />
                                </StackPanel>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate x:DataType="ms:OutputFile">
                                    <NumericUpDown Margin="2"
                                                   HorizontalAlignment="Stretch"
                                                   VerticalAlignment="Stretch"
                                                   Increment="1"
                                                   IsEnabled="{Binding IsTransCode}"
                                                   Maximum="51"
                                                   Minimum="0"
                                                   Value="{Binding ConstantRateFactor}" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <!--  =================================================  -->
                        <DataGridTemplateColumn Width="Auto" CanUserResize="False">
                            <DataGridTemplateColumn.Header>
                                <TextBlock HorizontalAlignment="Center" Text="{DynamicResource Localization.DataGrid.Resolution}" />
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate DataType="ms:OutputFile">
                                    <StackPanel Margin="2"
                                                IsEnabled="{Binding IsTransCode}"
                                                Orientation="Horizontal"
                                                Spacing="5">
                                        <AutoCompleteBox Width="75"
                                                         ItemsSource="{Binding ResolutionPreset}"
                                                         ValueMemberBinding="{ReflectionBinding Width}"
                                                         Watermark="Width">
                                            <Interaction.Behaviors>
                                                <behaviors:LostFocusUpdateBindingBehavior_AutoCompleteBox Text="{Binding CustomWidth}" />
                                            </Interaction.Behaviors>
                                            <AutoCompleteBox.ItemTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{ReflectionBinding Width}" />
                                                </DataTemplate>
                                            </AutoCompleteBox.ItemTemplate>
                                        </AutoCompleteBox>
                                        <ToggleButton Width="30"
                                                      Height="30"
                                                      Classes="Success"
                                                      IsChecked="{Binding IsLinkResolution}">
                                            <PathIcon Data="M440-280H280q-83 0-141.5-58.5T80-480q0-83 58.5-141.5T280-680h160v80H280q-50 0-85 35t-35 85q0 50 35 85t85 35h160v80ZM320-440v-80h320v80H320Zm200 160v-80h160q50 0 85-35t35-85q0-50-35-85t-85-35H520v-80h160q83 0 141.5 58.5T880-480q0 83-58.5 141.5T680-280H520Z" />
                                        </ToggleButton>
                                        <AutoCompleteBox Width="75"
                                                         ItemsSource="{Binding ResolutionPreset}"
                                                         ValueMemberBinding="{ReflectionBinding Height}"
                                                         Watermark="Height">
                                            <Interaction.Behaviors>
                                                <behaviors:LostFocusUpdateBindingBehavior_AutoCompleteBox Text="{Binding CustomHeight}" />
                                            </Interaction.Behaviors>
                                            <AutoCompleteBox.ItemTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{ReflectionBinding Height}" />
                                                </DataTemplate>
                                            </AutoCompleteBox.ItemTemplate>
                                        </AutoCompleteBox>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <!--  =================================================  -->
                        <DataGridTemplateColumn Width="200">
                            <DataGridTemplateColumn.Header>
                                <TextBlock HorizontalAlignment="Center" Text="{DynamicResource Localization.DataGrid.ProgressBar}" />
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate DataType="ms:OutputFile">
                                    <ProgressBar Width="200"
                                                 Classes="Success"
                                                 IsVisible="{Binding IsReady}"
                                                 Maximum="100"
                                                 Minimum="0"
                                                 ShowProgressText="True"
                                                 Value="{Binding ProcessingPercent}">
                                        <ProgressBar.IsIndeterminate>
                                            <MultiBinding Converter="{x:Static BoolConverters.And}">
                                                <Binding Path="IsReady" />
                                                <Binding Path="!IsProcessing" />
                                            </MultiBinding>
                                        </ProgressBar.IsIndeterminate>
                                    </ProgressBar>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </Border>
            <Border Grid.Row="4"
                    Margin="4,0,4,4"
                    Padding="2"
                    Classes="Shadow"
                    Theme="{DynamicResource CardBorder}">
                <DockPanel Margin="2">
                    <Button x:Name="AddOutputFileButton"
                            Height="40"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            Classes="Success"
                            Command="{Binding AddOutputFilesCommand}"
                            DockPanel.Dock="Left"
                            Theme="{DynamicResource SolidButton}">
                        <StackPanel Height="24" Orientation="Horizontal">
                            <PathIcon Width="15"
                                      Height="15"
                                      Data="M435-434H179v-91h256v-258h91v258h256v91H526v255h-91v-255Z" />
                            <TextBlock Margin="8,0"
                                       VerticalAlignment="Center"
                                       Classes="Subtitle2"
                                       Text="{DynamicResource Localization.ButtonText.AddOutputFiles}" />
                        </StackPanel>
                    </Button>
                    <Grid DockPanel.Dock="Right">
                        <Button x:Name="ExportSelectedtButton"
                                Height="40"
                                HorizontalAlignment="Right"
                                Classes="Default"
                                Command="{Binding ExportCommand}"
                                IsVisible="{Binding !IsExporting}"
                                Theme="{DynamicResource SolidButton}">
                            <StackPanel Height="24" Orientation="Horizontal">
                                <PathIcon Width="15"
                                          Height="15"
                                          Data="M480-320 280-520l56-58 104 104v-326h80v326l104-104 56 58-200 200ZM240-160q-33 0-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0 33-23.5 56.5T720-160H240Z" />
                                <TextBlock Margin="8,0"
                                           VerticalAlignment="Center"
                                           Classes="Subtitle2"
                                           Text="{DynamicResource Localization.ButtonText.Export}" />
                            </StackPanel>
                        </Button>
                        <Button x:Name="CencelExporttButton"
                                Height="40"
                                HorizontalAlignment="Right"
                                Classes="Danger"
                                Command="{Binding CencelCommand}"
                                IsVisible="{Binding IsExporting}"
                                Theme="{DynamicResource SolidButton}">
                            <StackPanel Height="24" Orientation="Horizontal">
                                <PathIcon Width="15"
                                          Height="15"
                                          Data="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z" />
                                <TextBlock Margin="8,0"
                                           VerticalAlignment="Center"
                                           Classes="Subtitle2"
                                           Text="{DynamicResource Localization.ButtonText.CancelExport}" />
                            </StackPanel>
                        </Button>
                    </Grid>

                </DockPanel>
            </Border>
        </Grid>
    </Grid>
</Window>
