<Window x:Class="QuickCutter_Avalonia.Views.MainWindow"
        xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:behaviors="using:QuickCutter_Avalonia.Behaviors"
        xmlns:controls="using:QuickCutter_Avalonia.Styles"
        xmlns:converters="using:QuickCutter_Avalonia.Converters"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:ms="using:QuickCutter_Avalonia.Models"
        xmlns:vlc="clr-namespace:LibVLCSharp.Avalonia;assembly=LibVLCSharp.Avalonia"
        xmlns:vm="using:QuickCutter_Avalonia.ViewModels"
        Title="QuickCutter_Avalonia"
        Width="1600"
        Height="900"
        MinWidth="1280"
        MinHeight="720"
        d:DesignHeight="900"
        d:DesignWidth="1600"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        mc:Ignorable="d">
    <Grid Name="MainGrid">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="160" MinWidth="160" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" MinWidth="569" />
        </Grid.ColumnDefinitions>
        <Border Grid.Column="0"
                Padding="2"
                Classes="Shadow"
                Theme="{StaticResource CardBorder}">
            <Grid RowDefinitions="Auto,Auto,*,Auto,Auto">
                <Button x:Name="AddItemButton"
                        Grid.Row="0"
                        Height="40"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        Classes="Success"
                        Theme="{DynamicResource SolidButton}">
                    <StackPanel Height="24" Orientation="Horizontal">
                        <PathIcon Width="15"
                                  Height="15"
                                  Data="M435-434H179v-91h256v-258h91v258h256v91H526v255h-91v-255Z" />
                        <TextBlock Margin="8,0"
                                   VerticalAlignment="Center"
                                   Classes="Subtitle2"
                                   Text="ADD ITEM" />
                    </StackPanel>
                </Button>
                <Separator Grid.Row="1" />
                <ListBox x:Name="ProjectsList"
                         Grid.Row="2"
                         ItemsSource="{Binding Projects}"
                         SelectionMode="Single">
                    <ListBox.Styles>
                        <Style Selector="ListBoxItem">
                            <Setter Property="Height" Value="48" />
                            <Setter Property="Padding" Value="16,0" />
                            <Setter Property="VerticalContentAlignment" Value="Center" />
                        </Style>
                    </ListBox.Styles>
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding ImportVideoInfo.VideoFullName}" />
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
                <Separator Grid.Row="3" />
                <StackPanel Grid.Row="4"
                            Height="40"
                            Orientation="Horizontal">
                    <Button Name="SettingButton"
                            Classes="Tertiary"
                            Theme="{DynamicResource BorderlessButton}">
                        <PathIcon Width="20"
                                  Height="20"
                                  Data="m387.694-100.001-15.231-121.846q-16.077-5.385-32.962-15.077-16.885-9.693-30.193-20.77l-112.846 47.692L104.156-370l97.615-73.769q-1.385-8.923-1.962-17.923-.577-9-.577-17.923 0-8.539.577-17.347.577-8.808 1.962-19.269L104.156-590l92.306-159.229 112.461 47.308q14.462-11.462 30.885-20.962 16.424-9.501 32.27-15.27l15.616-121.846h184.612l15.231 122.231q18 6.538 32.578 15.269 14.577 8.731 29.423 20.578l114-47.308L855.844-590l-99.153 74.922q2.154 9.693 2.346 18.116.192 8.423.192 16.962 0 8.154-.384 16.577-.385 8.423-2.77 19.27L854.46-370l-92.307 159.998-112.615-48.077q-14.846 11.847-30.308 20.962-15.462 9.116-31.693 14.885l-15.231 122.231H387.694ZM440-160h78.615L533-267.154q30.615-8 55.961-22.731 25.346-14.73 48.885-37.884L737.231-286l39.384-68-86.769-65.385q5-15.538 6.808-30.461 1.807-14.923 1.807-30.154 0-15.615-1.807-30.154-1.808-14.538-6.808-29.692L777.385-606 738-674l-100.539 42.385q-20.076-21.462-48.115-37.923-28.039-16.462-56.731-23.308L520-800h-79.385l-13.23 106.769q-30.616 7.231-56.539 22.154-25.923 14.923-49.461 38.462L222-674l-39.385 68L269-541.615q-5 14.23-7 29.615-2 15.385-2 32.385Q260-464 262-449q2 15 6.615 29.615l-86 65.385L222-286l99-42q22.769 23.385 48.692 38.308 25.923 14.923 57.308 22.923L440-160Zm40.461-200.001q49.923 0 84.961-35.038Q600.46-430.078 600.46-480t-35.038-84.961q-35.038-35.038-84.961-35.038-50.537 0-85.268 35.038-34.73 35.039-34.73 84.961t34.73 84.961q34.731 35.038 85.268 35.038ZM480-480Z" />
                    </Button>
                </StackPanel>

            </Grid>
        </Border>
        <GridSplitter Grid.Column="1" />
        <Grid Grid.Column="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="45" MinHeight="45" />
                <RowDefinition Height="*" MinHeight="200" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" MinHeight="200" />
            </Grid.RowDefinitions>
            <Border Grid.Row="0"
                    Height="45"
                    Padding="20,0"
                    Classes="Shadow"
                    Theme="{StaticResource CardBorder}">
                <Grid VerticalAlignment="Center" ColumnDefinitions="Auto,10,*,10,Auto">
                    <PathIcon Grid.Column="0" Data="M330.001-250.001h299.998v-59.998H330.001v59.998Zm0-160h299.998v-59.998H330.001v59.998Zm-77.692 310q-30.308 0-51.308-21t-21-51.308v-615.382q0-30.308 21-51.308t51.308-21h317.692l209.998 209.998v477.692q0 30.308-21 51.308t-51.308 21H252.309Zm287.692-520V-800H252.309q-4.616 0-8.463 3.846-3.846 3.847-3.846 8.463v615.382q0 4.616 3.846 8.463 3.847 3.846 8.463 3.846h455.382q4.616 0 8.463-3.846 3.846-3.847 3.846-8.463v-447.692H540.001ZM240-800v179.999V-800v640V-800Z" />
                    <TextBlock x:Name="HeaderTitle"
                               Grid.Column="2"
                               VerticalAlignment="Center" />
                    <Button Name="DeleteProjectButton"
                            Grid.Column="4"
                            Width="30"
                            Height="30"
                            Classes="Danger"
                            Click="DeleteProjectButton_Click"
                            Theme="{DynamicResource BorderlessButton}">
                        <PathIcon Width="20"
                                  Height="20"
                                  Data="M292.309-140.001q-29.923 0-51.115-21.193-21.193-21.192-21.193-51.115V-720h-40v-59.999H360v-35.384h240v35.384h179.999V-720h-40v507.691q0 30.308-21 51.308t-51.308 21H292.309ZM680-720H280v507.691q0 5.385 3.462 8.847 3.462 3.462 8.847 3.462h375.382q4.616 0 8.463-3.846 3.846-3.847 3.846-8.463V-720ZM376.155-280h59.999v-360h-59.999v360Zm147.691 0h59.999v-360h-59.999v360ZM280-720v520-520Z" />
                    </Button>
                </Grid>
            </Border>
            <Border Grid.Row="1"
                    Padding="5"
                    Classes="Shadow"
                    Theme="{StaticResource CardBorder}">
                <Grid Name="MediaPlayerGrid" RowDefinitions="*,Auto,Auto">
                    <Grid Name="VideoGrid" SizeChanged="VideoGrid_SizeChanged">
                        <vlc:VideoView x:Name="VideoView"
                                       Grid.Row="0"
                                       HorizontalAlignment="Stretch"
                                       VerticalAlignment="Stretch"
                                       MediaPlayer="{Binding MediaPlayer}" />
                    </Grid>
                    <Separator Grid.Row="1" />
                    <Grid Grid.Row="2" RowDefinitions="36,34">
                        <Grid Grid.Row="0"
                              VerticalAlignment="Center"
                              ColumnDefinitions="*,10,Auto">
                            <Slider Grid.Column="0"
                                    Classes="Accent"
                                    IsSnapToTickEnabled="False"
                                    Maximum="1"
                                    Minimum="0"
                                    TickFrequency="0.01"
                                    Value="{Binding Position}" />
                            <StackPanel Grid.Column="2"
                                        Orientation="Horizontal"
                                        Spacing="10">
                                <PathIcon Width="15"
                                          Height="15"
                                          Data="M561.539-155.617v-61.999q86.538-27.538 139.422-100Q753.846-390.077 753.846-481q0-90.923-52.885-163.384-52.884-72.462-139.422-100v-61.999Q673.23-776.46 743.537-686.46q70.307 89.999 70.307 205.46 0 115.461-70.307 205.46-70.307 90-181.998 119.923ZM146.156-380.001v-199.998h148.46l171.537-171.536v543.07L294.616-380.001h-148.46Zm415.383 46.154v-294.306q40.461 22 62.537 61.961Q646.153-526.23 646.153-480q0 45.615-22.269 84.884t-62.345 61.269ZM406.154-606l-86 86h-114v80h114l86 86v-252Zm-100 126Z" />
                                <Slider Name="VolumSlider"
                                        Width="100"
                                        Classes="Modern"
                                        IsSnapToTickEnabled="True"
                                        Maximum="100"
                                        Minimum="0"
                                        TickFrequency="1"
                                        Value="{Binding Volume}" />
                            </StackPanel>

                        </Grid>
                        <Grid Grid.Row="1" ColumnDefinitions="Auto,10,Auto,10,Auto,10,Auto,10,Auto,10,Auto,10,Auto,10,Auto">
                            <Button x:Name="PlayorPauseButton"
                                    Grid.Column="0"
                                    Width="30"
                                    Height="30"
                                    Classes="Tertiary"
                                    Command="{Binding PlayOrPauseVideoCommand}"
                                    Theme="{DynamicResource BorderlessButton}">
                                <Button.Styles>
                                    <Style Selector="Button#PlayorPauseButton PathIcon.playing">
                                        <Setter Property="IsVisible" Value="True" />
                                    </Style>
                                    <Style Selector="Button#PlayorPauseButton PathIcon:not(.playing)">
                                        <Setter Property="IsVisible" Value="False" />
                                    </Style>
                                </Button.Styles>
                                <Grid>
                                    <PathIcon Name="PlayIcon"
                                              Width="15"
                                              Height="15"
                                              Classes.playing="{Binding !IsPlaying}"
                                              Data="M340.001-236.156v-487.688L723.074-480 340.001-236.156ZM400-480Zm0 134 210.769-134L400-614v268Z"
                                              Foreground="#FF5AC262" />

                                    <PathIcon Name="PauseIcon"
                                              Width="15"
                                              Height="15"
                                              Classes.playing="{Binding IsPlaying}"
                                              Data="M530.001-220.001v-519.998h209.998v519.998H530.001Zm-310 0v-519.998h209.998v519.998H220.001ZM589.999-280H680v-400h-90.001v400ZM280-280h90.001v-400H280v400Zm0-400v400-400Zm309.999 0v400-400Z"
                                              Foreground="#FFFB9078" />
                                </Grid>
                            </Button>
                            <Button x:Name="InButton"
                                    Grid.Column="2"
                                    Width="30"
                                    Height="30"
                                    Classes="Tertiary"
                                    Command="{Binding BackwardCommand}"
                                    Theme="{DynamicResource BorderlessButton}">
                                <PathIcon Width="15"
                                          Height="15"
                                          Data="M250.001-250.001v-459.998h59.998v459.998h-59.998ZM680-253.847 453.847-480 680-706.153 722.153-664l-184 184 184 184L680-253.847Z" />
                            </Button>
                            <Button x:Name="OutButton"
                                    Grid.Column="4"
                                    Width="30"
                                    Height="30"
                                    Classes="Tertiary"
                                    Command="{Binding ForwardCommand}"
                                    Theme="{DynamicResource BorderlessButton}">
                                <PathIcon Width="15"
                                          Height="15"
                                          Data="M280-253.847 237.847-296l184-184-184-184L280-706.153 506.153-480 280-253.847Zm370.001 3.846v-459.998h59.998v459.998h-59.998Z" />
                            </Button>
                            <StackPanel Grid.Column="6" Orientation="Horizontal">
                                <TextBlock Width="80"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           Text="{Binding CurrentTime, StringFormat=hh\\:mm\\:ss\\.ff}" />
                                <TextBlock HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           Text=" / " />
                                <TextBlock Width="80"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           Text="{Binding Duration, StringFormat=hh\\:mm\\:ss\\.ff}" />
                            </StackPanel>
                            <ComboBox Name="AudioTrackComboBox"
                                      Grid.Column="8"
                                      Width="200"
                                      DisplayMemberBinding="{Binding Name}"
                                      ItemsSource="{Binding AudioTrack}"
                                      SelectedItem="{Binding SelectedAudioTrack}" />
                            <ComboBox Name="SubtitleTrackComboBox"
                                      Grid.Column="10"
                                      Width="200"
                                      DisplayMemberBinding="{Binding Name}"
                                      ItemsSource="{Binding SubtitleTrack}"
                                      SelectedItem="{Binding SelectedSubtitleTrack}" />
                            <Button Name="TestButton"
                                    Grid.Column="12"
                                    Click="Button_Click"
                                    Content="Test" />
                        </Grid>
                    </Grid>
                </Grid>
            </Border>
            <GridSplitter Grid.Row="2" />
            <Border Grid.Row="3"
                    Padding="2"
                    Classes="Shadow"
                    Theme="{StaticResource CardBorder}">
                <Grid Name="DataGrid_Grid" RowDefinitions="*,Auto,Auto">
                    <DataGrid Name="OutputFilesDataGrid"
                              Grid.Column="1"
                              CanUserResizeColumns="True"
                              GridLinesVisibility="All">
                        <DataGrid.Resources>
                            <converters:StringToTimeSpanConverter x:Key="StringToTimeSpanConverter" />
                        </DataGrid.Resources>
                        <DataGrid.Columns>
                            <DataGridTextColumn x:DataType="ms:OutputFile"
                                                Binding="{Binding OutputFileName}"
                                                Header="Output File Name" />
                            <!--  =================================================  -->
                            <DataGridTemplateColumn Width="Auto"
                                                    CanUserResize="False"
                                                    Header="In Time">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate x:DataType="ms:OutputFile">
                                        <MaskedTextBox Margin="2" Mask="00:00:00.00">
                                            <Interaction.Behaviors>
                                                <behaviors:LostFocusUpdateBindingBehavior Text="{Binding Edit_InTime, Converter={StaticResource StringToTimeSpanConverter}}" />
                                            </Interaction.Behaviors>
                                        </MaskedTextBox>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <!--  =================================================  -->
                            <DataGridTemplateColumn Width="Auto"
                                                    CanUserResize="False"
                                                    Header="Out Time">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate x:DataType="ms:OutputFile">
                                        <MaskedTextBox Margin="2" Mask="00:00:00.00">
                                            <Interaction.Behaviors>
                                                <behaviors:LostFocusUpdateBindingBehavior Text="{Binding Edit_OutTime, Converter={StaticResource StringToTimeSpanConverter}}" />
                                            </Interaction.Behaviors>
                                        </MaskedTextBox>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <!--  =================================================  -->
                            <DataGridTemplateColumn Width="Auto"
                                                    CanUserResize="False"
                                                    Header="Codec">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate x:DataType="ms:OutputFile">
                                        <ComboBox Margin="2"
                                                  DisplayMemberBinding="{Binding Name}"
                                                  ItemsSource="{Binding CodecOptions}"
                                                  SelectedItem="{Binding SelectedCodec}" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <!--  =================================================  -->
                            <DataGridTemplateColumn Width="Auto"
                                                    CanUserResize="False"
                                                    Header="Preset">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate x:DataType="ms:OutputFile">
                                        <ComboBox Margin="2"
                                                  ItemsSource="{Binding SpeedPresetOptions}"
                                                  SelectedItem="{Binding SelectedSpeedPreset}" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <!--  =================================================  -->
                            <DataGridTemplateColumn Width="Auto"
                                                    CanUserResize="False"
                                                    Header="CRF">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate x:DataType="ms:OutputFile">
                                        <NumericUpDown Margin="2"
                                                       HorizontalAlignment="Stretch"
                                                       VerticalAlignment="Stretch"
                                                       Increment="1"
                                                       Maximum="51"
                                                       Minimum="0"
                                                       ToolTip.Tip="0~51"
                                                       Value="{Binding ConstantRateFactor}" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                    <Separator Grid.Row="1" />
                    <DockPanel Grid.Row="2" Margin="2">
                        <Button x:Name="AddOutputFileButton"
                                Height="40"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Stretch"
                                Classes="Success"
                                Command="{Binding AddOutputFilesCommand}"
                                DockPanel.Dock="Left"
                                Theme="{DynamicResource SolidButton}">
                            <StackPanel Height="24" Orientation="Horizontal">
                                <PathIcon Width="15"
                                          Height="15"
                                          Data="M435-434H179v-91h256v-258h91v258h256v91H526v255h-91v-255Z" />
                                <TextBlock Margin="8,0"
                                           VerticalAlignment="Center"
                                           Classes="Subtitle2"
                                           Text="ADD OUTPUT" />
                            </StackPanel>
                        </Button>
                        <Button x:Name="ExportProjectButton"
                                Height="40"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Stretch"
                                Classes="Default"
                                DockPanel.Dock="Right"
                                Theme="{DynamicResource SolidButton}">
                            <StackPanel Height="24" Orientation="Horizontal">
                                <PathIcon Width="15"
                                          Height="15"
                                          Data="M480-320 280-520l56-58 104 104v-326h80v326l104-104 56 58-200 200ZM240-160q-33 0-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0 33-23.5 56.5T720-160H240Z" />
                                <TextBlock Margin="8,0"
                                           VerticalAlignment="Center"
                                           Classes="Subtitle2"
                                           Text="EXPORT PROJECT" />
                            </StackPanel>
                        </Button>
                        <Button x:Name="ExportSelectedtButton"
                                Height="40"
                                Margin="0,0,5,0"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Stretch"
                                Classes="Default"
                                DockPanel.Dock="Right"
                                Theme="{DynamicResource SolidButton}">
                            <StackPanel Height="24" Orientation="Horizontal">
                                <PathIcon Width="15"
                                          Height="15"
                                          Data="M480-320 280-520l56-58 104 104v-326h80v326l104-104 56 58-200 200ZM240-160q-33 0-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0 33-23.5 56.5T720-160H240Z" />
                                <TextBlock Margin="8,0"
                                           VerticalAlignment="Center"
                                           Classes="Subtitle2"
                                           Text="EXPORT SELECTED" />
                            </StackPanel>
                        </Button>
                    </DockPanel>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Window>
